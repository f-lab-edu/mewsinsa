<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mewsinsa.auth.jwt.repository.LogoutTokenRepository">

  <insert id="addLogoutToken">
    INSERT INTO logout_token (member_id, token_value, logout_at)
    VALUES (#{memberId}, #{tokenValue}, #{logoutAt})
  </insert>

  <delete id="deleteLogoutToken">
    DELETE
    FROM logout_token
    WHERE member_id = #{memberId}
  </delete>


  <select id="findLogoutTokenByTokenValue"
          resultType="com.mewsinsa.auth.jwt.controller.dto.LogoutTokenDto">
    SELECT
      member_id AS memberId,
      token_value AS tokenValue,
      logout_at AS logoutAt
    FROM logout_token
    WHERE token_value = #{accessToken}
  </select>

  <select id="findLogoutTokenByMemberId"
          resultType="com.mewsinsa.auth.jwt.controller.dto.LogoutTokenDto">
    SELECT
      member_id AS memberId,
      token_value AS tokenValue,
      logout_at AS logoutAt
      FROM logout_token
    WHERE token_value = #{memberId}
  </select>
</mapper>